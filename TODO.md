# TODO

- âœ… Migrate projects/world
- âœ… Show in test.mdx
- âœ… Migrate to React 18

- âœ… Get profile-1-a working
  - Fix initial lit issue
  - Fix persistent PROFILE issue

- âœ… When tab initially maximised, unseen tabs should not be rendered

- If Tabs initially disabled:
  - âœ… World won't request unseen geomorphs
  - âœ… Terminal initially lacks session

- âœ… profile pastes into tty
- âœ… profile paste suppresses prompt and history
- âœ… 'await-prompt' does not block 'line' commands
- âŒ non-bg source also pastes into tty
- âœ… 'await-prompt' does not block 'resolve' commands
- âœ… avoid persisting PROFILE

- âœ… create-npc now State of `<NPC>`
  - consequently, hot-reloadable

- âœ… Fix reload Tabs error:
  - NPCs.jsx:277 Uncaught (in promise) Error: npc "andros" does not exist
  - Concerns  {npcKey: 'andros', action: 'cancel'}

- âœ… on reload Tabs ensure store.tabs.enabled `true`

- âœ… Can reset while profile running, without tty errors
  - âœ… cancel pending pastes
  - âœ… cleanup session xterm
    - âœ… cancel ongoing commands
    - âœ… unlink tty

- âœ… Disable/Enable Tabs should not make idle npc walk again

- âœ… `ready` -> `awaitWorld`
- âœ… Initial panzoom error (cancelled) should not propagate 
- âœ… Avoid full refresh on change `World`
  - ISSUE with getter inside `useStateRef` i.e. `state` was undefined
- âœ… `spawn` should not finish until npc mounted and NPCS.npc[key] exists

- âœ… `spawn foo $( click 1 )` should not trigger a walk
  - seems `goLoop` is receiving click before npc has moved, so plans a walk
  - we force click to be ignored by earlier handlers

- ğŸš§ stop npc `foo` from walking through doors
  ```sh
  nav foo $( click 1 ) | walk foo
  ```


- Start new page intro.mdx
  - it will replace objective.mdx

- Fix HMR of NPC (walks without going anywhere)
- NPC spawn too "slow" for initial collision detect?
  - Spawn should trigger a player collision test
- modularise npc JSON
- Avoid overwrite e.g. public/geomorph via pages/geomorph.mdx

- âœ… Weird animation pause on disable Tabs
- âœ… Change Tabs splitter size on mobile
  ```tsx
  (jsonModel.global = jsonModel.global || {}).splitterSize = 16;
  (jsonModel.global = jsonModel.global || {}).splitterExtra = 12;
  ```
  